import{u as w,r as c,j as s}from"./index-BITXxDgh.js";import{u as k}from"./useOrderStore-BrgoHs65.js";import{a as L,b as C,T as S}from"./constants-DjoNNNWI.js";function F(){const{cart:a,changeQuantity:m,removeFromCart:h,addToCart:p,clearCart:d}=k(),t=w(),[$,j]=c.useState(!1),[O,u]=c.useState(""),n=a.reduce((e,r)=>e+r.price*r.quantity,0),o=15,i=n*.0325,g=n+o+i,f=123,b="5 May 2025",y=c.useCallback(async()=>{var r,x;if(!localStorage.getItem("isLoggedIn")){t("/login");return}try{const l=await L.post(`${C}/orders`,{products:a==null?void 0:a.map(({id:N,quantity:v})=>({id:N,quantity:v}))},{headers:{Authorization:`Bearer ${S}`}});l.data.status&&(alert(l.data.message),d(),t("/products"))}catch(l){u(((x=(r=l.response)==null?void 0:r.data)==null?void 0:x.message)||"Order failed. Please try again."),console.error("Order error:",l)}finally{j(!1)}},[a,t,d]);return s.jsxs("div",{className:"flex flex-col md:flex-row gap-6 p-4 max-w-6xl mx-auto",children:[s.jsx("div",{className:"md:w-2/3 space-y-4",children:a.map(e=>s.jsx("div",{className:"bg-white rounded-lg shadow p-4 flex flex-col",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"w-1/4 md:w-1/5 flex-shrink-0",children:s.jsx("img",{src:(e==null?void 0:e.image_url)||"/Dress.png",alt:e.name,className:"w-full object-cover"})}),s.jsxs("div",{className:"flex-grow px-4",children:[s.jsxs("div",{className:"flex justify-between items-start w-full",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:e.name}),s.jsx("span",{className:"bg-gray-100 text-xs px-2 py-1 rounded",children:e.category})]}),s.jsx("button",{onClick:()=>h(e.id),className:"text-red-500",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})})]}),s.jsxs("p",{className:"mt-1 text-gray-600",children:["Stock: ",e.stock]}),s.jsxs("div",{className:"text-xl font-bold mt-2",children:["$",e.price]}),s.jsx("div",{className:"mt-4 flex items-center",children:s.jsxs("div",{className:"flex border border-gray-300 rounded",children:[s.jsx("button",{onClick:()=>m(e.id,Math.max(1,e.quantity-1)),className:"px-3 py-1 border-r border-gray-300",children:"âˆ’"}),s.jsx("span",{className:"px-4 py-1",children:e.quantity}),s.jsx("button",{onClick:()=>p(e),className:"px-3 py-1 border-l border-gray-300",children:"+"})]})})]})]})},e.id))}),s.jsx("div",{className:"md:w-1/3",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 sticky top-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Order Summary ( #",f," )"]}),s.jsx("span",{className:"text-gray-600 text-sm",children:b})]}),s.jsxs("div",{className:"space-y-4 divide-y",children:[s.jsxs("div",{className:"flex justify-between py-2",children:[s.jsx("span",{children:"Subtotal"}),s.jsxs("span",{className:"font-semibold",children:["$",n]})]}),s.jsxs("div",{className:"flex justify-between py-2",children:[s.jsx("span",{children:"Shipping"}),s.jsxs("span",{className:"font-semibold",children:["$",o.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between py-2",children:[s.jsx("span",{children:"Tax"}),s.jsxs("span",{className:"font-semibold",children:["$",i.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between py-4 font-bold text-lg",children:[s.jsx("span",{children:"Total"}),s.jsxs("span",{children:["$",g.toFixed(2)]})]})]}),s.jsx("button",{onClick:y,className:"mt-6 w-full bg-black text-white py-3 px-4 rounded hover:bg-gray-800 transition-colors",children:"Place the order"})]})})]})}export{F as default};
